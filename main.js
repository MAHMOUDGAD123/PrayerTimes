var ne=async(e,t)=>{let n=`https://geocode.maps.co/reverse?lat=${e}&lon=${t}&api_key=65f288a00d129207874014qnh3d03c5`,o=new Request(n,{method:"GET"}),s=await fetch(o);return s.ok?await s.json():null},ae=async(e,t)=>{let a=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m`,n=new Request(a,{method:"GET"}),o=await fetch(n);return o.ok?await o.json():null},F=(e=!1,t=0,a=0)=>new Promise(n=>{let o=async i=>{let h=new Date;t||(t=h.getMonth()+1),a||(a=h.getFullYear());let _=i.coords,p=_.latitude,f=_.longitude,y=`https://api.aladhan.com/v1/calendar/${a}/${t}?latitude=${p}&longitude=${f}&method=5`,g=null,b=null,d=null,$=0,q=null,w=null,A=new Request(y,{method:"GET"}),k=3;do w=await fetch(A);while(!w.ok&&--k);w.ok&&(e||(b=await ne(p,f),d=await ae(p,f),b&&(q=b.address),d&&($=Math.round(+d.current.temperature_2m))),g=(await w.json()).data),n({data:g,address:q,temperature:$})},s=i=>{n({data:null,address:null,temperature:0})},r={enableHighAccuracy:!0,timeout:7e3,maximumAge:0};navigator.geolocation.getCurrentPosition(o,s,r)});var oe=!0,T=0,C=null,u=window.localStorage.getItem("lng")==="en",c=new Map([["Saturday","\u0627\u0644\u0633\u0628\u062A"],["Sunday","\u0627\u0644\u0623\u062D\u062F"],["Monday","\u0627\u0644\u0625\u062B\u0646\u064A\u0646"],["Tuesday","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621"],["Wednesday","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621"],["Thursday","\u0627\u0644\u062E\u0645\u064A\u0633"],["Friday","\u0627\u0644\u062C\u0645\u0639\u0629"],["sat","\u0627\u0644\u0633\u0628\u062A"],["sun","\u0627\u0644\u0623\u062D\u062F"],["mon","\u0627\u0644\u0625\u062B\u0646\u064A\u0646"],["tue","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621"],["wed","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621"],["thu","\u0627\u0644\u062E\u0645\u064A\u0633"],["fri","\u0627\u0644\u062C\u0645\u0639\u0629"],["January","\u064A\u0646\u0627\u064A\u0631"],["February","\u0641\u0628\u0631\u0627\u064A\u0631"],["March","\u0645\u0627\u0631\u0633"],["April","\u0625\u0628\u0631\u064A\u0644"],["May","\u0645\u0627\u064A\u0648"],["June","\u064A\u0648\u0646\u064A\u0648"],["July","\u064A\u0648\u0644\u064A\u0648"],["August","\u0623\u063A\u0633\u0637\u0633"],["September","\u0633\u0628\u062A\u0645\u0628\u0631"],["October","\u0623\u0643\u062A\u0648\u0628\u0631"],["November","\u0646\u0648\u0641\u0645\u0628\u0631"],["December","\u062F\u064A\u0633\u0645\u0628\u0631"],["Mu\u1E25arram","\u0645\u062D\u0631\u0645"],["\u1E62afar","\u0635\u0641\u0631"],["Rab\u012B\u02BF al-awwal","\u0631\u0628\u064A\u0639 \u0627\u0644\u0623\u0648\u0644"],["Rab\u012B\u02BF al-th\u0101n\u012B","\u0631\u0628\u064A\u0639 \u0627\u0644\u062B\u0627\u0646\u064A"],["Jum\u0101d\xE1 al-\u016Bl\xE1","\u062C\u0645\u0627\u062F \u0627\u0644\u0623\u0648\u0644"],["Jum\u0101d\xE1 al-\u0101khirah","\u062C\u0645\u0627\u062F \u0627\u0644\u062B\u0627\u0646\u064A"],["Rajab","\u0631\u062C\u0628"],["Sha\u02BFb\u0101n","\u0634\u0639\u0628\u0627\u0646"],["Rama\u1E0D\u0101n","\u0631\u0645\u0636\u0627\u0646"],["Shaww\u0101l","\u0634\u0648\u0627\u0644"],["Dh\u016B al-Qa\u02BFdah","\u0630\u0648 \u0627\u0644\u0642\u0639\u062F\u0629"],["Dh\u016B al-\u1E24ijjah","\u0630\u0648 \u0627\u0644\u062D\u062C\u0629"],["Prayers","\u0627\u0644\u0635\u0644\u0648\u0627\u062A"],["Calendar","\u0627\u0644\u062A\u0642\u0648\u064A\u0645"],["Settings","\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A"],["Fajr","\u0627\u0644\u0641\u062C\u0631"],["Sunrise","\u0627\u0644\u0634\u0631\u0648\u0642"],["Dhuhr","\u0627\u0644\u0638\u0647\u0631"],["Asr","\u0627\u0644\u0639\u0635\u0631"],["Maghrib","\u0627\u0644\u0645\u063A\u0631\u0628"],["Isha","\u0627\u0644\u0639\u0634\u0627\u0621"],["Midnight","\u0645\u0646\u062A\u0635\u0641 \u0627\u0644\u0644\u064A\u0644"],["Language","\u0627\u0644\u0644\u063A\u0629"],["Theme","\u0627\u0644\u0633\u0645\u0629"],["English","\u0625\u0646\u062C\u0644\u064A\u0632\u064A"],["Arabic","\u0639\u0631\u0628\u064A"],["0","\u0660"],["1","\u0661"],["2","\u0662"],["3","\u0663"],["4","\u0664"],["5","\u0665"],["6","\u0666"],["7","\u0667"],["8","\u0668"],["9","\u0669"],["Holiday","\u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629"],["Times","\u0623\u0648\u0642\u0627\u062A"],["Today","\u0627\u0644\u064A\u0648\u0645"],["Prayer","\u0627\u0644\u0635\u0644\u0627\u0629"],["Remaining Time","\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062A\u0628\u0642\u064A"],["MG","\u0625\u0645 \u062C\u064A"],["Designed-by","\u062A\u0635\u0645\u064A\u0645"],["Athan","\u0623\u0630\u0627\u0646"],["Lailat-ul-Miraj","\u0644\u064A\u0644\u0629 \u0627\u0644\u0625\u0633\u0631\u0627\u0621 \u0648\u0627\u0644\u0645\u0639\u0631\u0627\u062C"],["Lailat-ul-Bara'at","\u0644\u064A\u0644\u0629 \u0627\u0644\u0646\u0635\u0641 \u0645\u0646 \u0634\u0639\u0627\u0646"],["1st Day of Ramadan","\u0623\u0648\u0644 \u0623\u064A\u0627\u0645 \u0634\u0647\u0631 \u0631\u0645\u0636\u0627\u0646 \u0627\u0644\u0643\u0631\u064A\u0645"],["Eid-ul-Fitr","\u0639\u064A\u062F \u0627\u0644\u0641\u0637\u0631"],["Lailat-ul-Qadr","\u0644\u064A\u0644\u0629 \u0627\u0644\u0642\u062F\u0631"],["Hajj","\u0627\u0644\u062D\u062C"],["At-Tarwiyah","\u064A\u0648\u0645 \u0627\u0644\u062A\u0631\u0648\u064A\u0629"],["Arafa","\u064A\u0648\u0645 \u0639\u0631\u0641\u0629"],["Eid-ul-Adha","\u0639\u064A\u062F \u0627\u0644\u0623\u0636\u062D\u064A"],["1st Tashriq Days","\u0623\u0648\u0644 \u0623\u064A\u0627\u0645 \u0627\u0644\u062A\u0634\u0631\u064A\u0642"],["2nd Tashriq Days","\u062B\u0627\u0646\u064A \u0623\u064A\u0627\u0645 \u0627\u0644\u062A\u0634\u0631\u064A\u0642"],["3rd Tashriq Days","\u062B\u0627\u0644\u062B \u0623\u064A\u0627\u0645 \u0627\u0644\u062A\u0634\u0631\u064A\u0642"],["Ashura","\u064A\u0648\u0645 \u0639\u0627\u0634\u0648\u0631\u0627\u0621"],["Mawlid al-Nabi","\u0645\u0648\u0644\u062F \u0627\u0644\u0646\u0628\u064A (\u0635)"],["Beginning of the holy months","\u0628\u062F\u0627\u064A\u0629 \u0627\u0644\u0623\u0634\u0647\u0631 \u0627\u0644\u062D\u0631\u0645"],["End of the holy months","\u0646\u0647\u0627\u064A\u0629 \u0627\u0644\u0623\u0634\u0647\u0631 \u0627\u0644\u062D\u0631\u0645"],["Lailat-ul-Ragha'ib","\u0644\u064A\u0644\u0629 \u0627\u0644\u0631\u063A\u0627\u0626\u0628"],["Urs of Mawlana Shaykh Nazim al-Haqqani (\u0642)","\u0639\u0631\u0633 \u0645\u0648\u0644\u0627\u0646\u0627 \u0627\u0644\u0634\u064A\u062E \u0646\u0627\u0638\u0645 \u0627\u0644\u062D\u0642\u0627\u0646\u064A (\u0642)"],["Birth of Sayyidina `Ali ibn Abi Talib (\u0631)","\u0645\u064A\u0644\u0627\u062F \u0633\u064A\u062F\u0646\u0627 \u0639\u0644\u064A \u0628\u0646 \u0623\u0628\u064A \u0637\u0627\u0644\u0628 (\u0631)"],["Urs of Sayyidina Jafar as-Sadiq (\u0642)","\u0639\u0631\u0633 \u0633\u064A\u062F\u0646\u0627 \u062C\u0639\u0641\u0631 \u0627\u0644\u0635\u0627\u062F\u0642 (\u0642)"],["Urs of Zaynab bint Ali (\u0631)","\u0639\u0631\u0633 \u0627\u0644\u0633\u064A\u062F\u0629 \u0632\u064A\u0646\u0628 \u0628\u0646\u062A \u0639\u0644\u064A (\u0631)"],["",""],["",""],["",""],["",""],["",""]]),W=new Map([["prayerTimesPage","prayer_times_btn"],["monthCalendarPage","month_cal_btn"],["settingsPage","settings_btn"]]),se=new Map([["langSwitch",Z]]),Q=["January","February","March","April","May","June","July","August","September","October","November","December"],m=new Map([[1,{name:"Fajr",s_time:"",time:{hr:0,min:0}}],[2,{name:"Sunrise",s_time:"",time:{hr:0,min:0}}],[3,{name:"Dhuhr",s_time:"",time:{hr:0,min:0}}],[4,{name:"Asr",s_time:"",time:{hr:0,min:0}}],[5,{name:"Maghrib",s_time:"",time:{hr:0,min:0}}],[6,{name:"Isha",s_time:"",time:{hr:0,min:0}}],[7,{name:"Midnight",s_time:"00:00",time:{hr:23,min:59.5}}]]),M=e=>e.slice(0,5),re=e=>{let t=+e.slice(0,2),a=+e.slice(3,5);return[t,a]},ce=()=>T>=m.size,G=()=>{let e=C.querySelector("i.bad-net");e.style.display="block",setTimeout(()=>{e.style.display="none"},2500)};C=document.getElementById("prayerTimesPage");C.style.display="flex";document.getElementById(W.get(C.id)).classList.add("picked");me();Z();(async()=>{if(oe){let{data:e,address:t,temperature:a}=await F();if(e){let n=e[new Date().getDate()-1];K(n);let o=V();if(z(o),t){let s=document.getElementById("city_country"),r=t.city,i=r||t.state;s.textContent=`${i} - ${t.country}`,X(e)}if(a){let s=document.querySelector(".location_temp > .temperature > .degree");s.textContent=`${a}`}document.addEventListener("click",s=>{Notification.permission!=="granted"&&Notification.requestPermission()},{once:!0})}else G()}})();function Z(){let e=document.querySelectorAll("[data-en]"),t=document.querySelector(".logo > .txt"),a=document.getElementById("langSwitch");u?(u=!1,a.classList.add("on"),document.body.classList.add("ar"),t.classList.add("ar"),e.forEach(n=>{let o=n.dataset.en;n.textContent=c.get(o)}),window.localStorage.setItem("lng","en")):(u=!0,a.classList.remove("on"),document.body.classList.remove("ar"),t.classList.remove("ar"),e.forEach(n=>{let o=n.dataset.en;n.textContent=o}),window.localStorage.setItem("lng","ar"))}var ie=async()=>{let{data:e}=await F(!0);if(e){let t=e[new Date().getDate()-1];K(t),z(1)}else G()};function K(e){let t=e.date.gregorian,a=e.date.hijri,n=e.timings;for(let p=1,f=m.size;p<f;++p){let y=m.get(p),g=n[`${y.name}`],[b,d]=re(g);y.s_time=M(g),y.time.hr=b,y.time.min=d}let o=document.getElementById("today"),s=t.weekday.en;o.dataset.en=s;let r=document.querySelector(".month > .hijri"),i=document.querySelector(".month > .melady"),h=a.month.en,_=t.month.en;i.dataset.en=_,r.dataset.en=h,u?(o.textContent=s,r.textContent=h,i.textContent=_):(o.textContent=c.get(s),r.textContent=c.get(h),i.textContent=c.get(_)),document.querySelector(".day > .hijri").textContent=a.day,document.querySelector(".day > .melady").textContent=t.day,document.querySelector(".year > .hijri").textContent=a.year,document.querySelector(".year > .melady").textContent=t.year,document.querySelector(".prayers > .fajr > .time").textContent=`${m.get(1).s_time}`,document.querySelector(".prayers > .sunrise > .time").textContent=`${m.get(2).s_time}`,document.querySelector(".prayers > .dhuhr > .time").textContent=`${m.get(3).s_time}`,document.querySelector(".prayers > .asr > .time").textContent=`${m.get(4).s_time}`,document.querySelector(".prayers > .maghrib > .time").textContent=`${m.get(5).s_time}`,document.querySelector(".prayers > .isha > .time").textContent=`${m.get(6).s_time}`,document.querySelector(".prayers > .midnight > .time").textContent=`${m.get(7).s_time}`}function de(e){let t=new Date,a=m.get(e).time,n=a.hr,o=a.min;t.setHours(n,o);let s=document.querySelector(".counter-down > .hr"),r=document.querySelector(".counter-down > .min"),i=document.querySelector(".counter-down > .sec"),h=1e3*60*60,_=1e3*60,p=1e3,f=setInterval(()=>{let y=Date.now(),g=t-y,b=Math.floor(g/h),d=Math.floor(g%h/_),$=Math.floor(g%_/p);if(s.textContent=L(b),r.textContent=L(d),i.textContent=L($),g<=0){clearInterval(f);let q=6e4;s.textContent="00",r.textContent="00",i.textContent="00";let w=document.querySelector(".times > .next-prayer > .counter-down");if(w.classList.add("blink"),Notification.permission==="granted")try{new Notification(le(e),{icon:"../assets/imgs/logo.png"})}catch{}setTimeout(()=>{w.classList.remove("blink"),ce()?ie():z(V(!1))},q)}},1e3)}function V(e=!0){if(!e)return T+1;let t=[...m.entries()],a=1,n=new Date,o=n.getHours()*60+n.getMinutes(),s=-1;return t.some(r=>{let i=r[1].time,h=i.hr*60+i.min;return o>=s&&o<=h?(a=r[0],!0):(s=h,!1)}),a}function z(e){let t=document.querySelectorAll(".times > .prayers > .prayer");T&&t[T-1].classList.remove("picked"),t[e-1].classList.add("picked");let a=document.querySelector(".times > .next-prayer > .prayer-name"),n=document.querySelector(".times > .next-prayer > .txt"),o=m.get(e).name,s=n.dataset.en;a.dataset.en=o,u?(a.textContent=o,n.textContent=s):(a.textContent=c.get(o),n.textContent=c.get(s)),de(e),T=e}function le(e){let t=m.get(e).name;return u?t:c.get(t)}function me(){let e=document.getElementById("t_sel_month"),t=document.getElementById("t_sel_year"),a=new Date;u?Q.forEach((n,o)=>{e.innerHTML+=`<option value="${o+1}" data-en="${n}">${n}</option>`}):Q.forEach((n,o)=>{e.innerHTML+=`<option value="${o+1}" data-en="${n}">${c.get(n)}</option>`});for(let n=1980;n<2051;++n)t.innerHTML+=`<option value="${n}">${n}</option>`;e.querySelector(`option[value="${a.getMonth()+1}"]`).selected=!0,t.querySelector(`option[value="${a.getFullYear()}"]`).selected=!0}function X(e){let t=e.length,a=new Date,n=a.getDate(),o=a.getMonth()+1,s=a.getFullYear(),r=e[0].date.hijri.month.en,i=e[t-1].date.hijri.month.en,h=e[0].date.hijri.month.number,_=e[0].date.hijri.year,p=e[t-1].date.hijri.year,f=document.querySelector(".t_hijri_1st > .month"),y=document.querySelector(".t_hijri_2nd > .month"),g=document.querySelector(".t_hijri_1st > .year"),b=document.querySelector(".t_hijri_2nd > .year");f.dataset.en=r,y.dataset.en=i,u?(f.textContent=r,y.textContent=i):(f.textContent=c.get(r),y.textContent=c.get(i)),g.textContent=_,b.textContent=p;let d=document.createElement("tbody"),$=document.getElementById("cal_table");$.innerHTML="";let q=(x,S)=>{u?d.innerHTML+=`
      <tr class="header">
        <th scope="col" class="g-month" data-en="${x}">${x}</th>
        <th scope="col" class="h-month" data-en="${S}">${S}</th>
        <th scope="col" class="prayer fajr"data-en="Fajr">Fajr</th>
        <th scope="col" class="prayer sunrise" data-en="Sunrise">Sunrise</th>
        <th scope="col" class="prayer dhuhr"data-en="Dhuhr">Dhuhr</th>
        <th scope="col" class="prayer asr"data-en="Asr">Asr</th>
        <th scope="col" class="prayer maghrib" data-en="Maghrib">Maghrib</th>
        <th scope="col" class="prayer isha" data-en="Isha">Isha</th>
      </tr>
      `:d.innerHTML+=`
      <tr class="header">
        <th scope="col" class="g-month" data-en="${x}">${c.get(x)}</th>
        <th scope="col" class="h-month" data-en="${S}">${c.get(S)}</th>
        <th scope="col" class="prayer fajr" data-en="Fajr">${c.get("Fajr")}</th>
        <th scope="col" class="prayer sunrise" data-en="Sunrise">${c.get("Sunrise")}</th>
        <th scope="col" class="prayer dhuhr" data-en="Dhuhr">${c.get("Dhuhr")}</th>
        <th scope="col" class="prayer asr" data-en="Asr">${c.get("Asr")}</th>
        <th scope="col" class="prayer maghrib" data-en="Maghrib">${c.get("Maghrib")}</th>
        <th scope="col" class="prayer isha" data-en="Isha">${c.get("Isha")}</th>
      </tr>
      `},w=e[0].date.gregorian.month,A=+e[0].date.gregorian.year;q(w.en,r);let k=e[0].date.hijri.month.number;e.forEach(x=>{let S=x.date.gregorian,D=x.date.hijri,v=x.timings,U=D.month.number;k!==U&&q(w.en,i);let N=S.weekday.en.slice(0,3).toLowerCase(),te=c.get(N),Y=+S.day,R=+D.day,O=D.holidays,E=document.createElement("tr");if(E.className="data",E.dataset.day=Y,E.tabIndex=0,E.innerHTML=`
      <th scope="row">
        <span>${Y}</span> 
        <span data-en="${N}">${u?N:te}</span>
      </th>
      <th scope="row">${R}</th>
      <td>${M(v.Fajr)}</td>
      <td>${M(v.Sunrise)}</td>
      <td>${M(v.Dhuhr)}</td>
      <td>${M(v.Asr)}</td>
      <td>${M(v.Maghrib)}</td>
      <td>${M(v.Isha)}</td>
    `,O.length){let J=document.createElement("td"),B=document.createElement("div"),P=document.createElement("div"),H=document.createDocumentFragment();E.classList.add("holiday"),J.className="holiday-info",B.className="holiday-title",B.dataset.en="Holiday",B.textContent=u?"Holiday":c.get("Holiday"),P.className="holiday-date",[[R,!1],[D.month.en,!0],[D.year,!1]].forEach(([j,I])=>{let l=document.createElement("div");I?(l.dataset.en=j,l.textContent=u?j:c.get(j)):l.textContent=j,P.appendChild(l)}),H.appendChild(B),H.appendChild(P),O.forEach(j=>{let I=document.createElement("div"),l="";if(k===12)switch(R){case 8:l="At-Tarwiyah";break;case 9:case 10:l=j;break;case 11:l="1st Tashriq Days";break;case 12:l="2nd Tashriq Days";break;case 13:l="3rd Tashriq Days";break}else l=j;I.dataset.en=l,I.textContent=u?l:c.get(l),H.appendChild(I)}),J.appendChild(H),E.appendChild(J)}d.appendChild(E),k=U}),o===w.number&&s===A&&d.querySelector(`tr[data-day='${n}']`).classList.add("today"),d.querySelectorAll("tr.holiday").forEach(x=>{x.addEventListener("click",S=>{S.currentTarget.classList.toggle("show")})}),$.appendChild(d)}async function ee(e,t){let a=document.getElementById("loading");a.style.opacity=1;let{data:n}=await F(!0,e,t);a.style.opacity=0,n?X(n):G()}W.forEach((e,t,a)=>{let n=document.getElementById(t),o=document.getElementById(e),s=()=>{n!==C&&(n.style.display="flex",C.style.display="none",o.classList.add("picked"),document.getElementById(a.get(C.id)).classList.remove("picked"),C=n)};o.addEventListener("click",()=>{s()}),o.addEventListener("keydown",r=>{(r.code==="Enter"||r.code==="Space")&&s()})});document.getElementById("t_sel_month").addEventListener("input",e=>{let t=+e.target.value,a=+document.getElementById("t_sel_year").value;ee(t,a)});document.getElementById("t_sel_year").addEventListener("input",e=>{let t=+document.getElementById("t_sel_month").value,a=+e.target.value;ee(t,a)});se.forEach((e,t)=>{let a=document.getElementById(t);a.addEventListener("click",e),a.addEventListener("keydown",n=>{(n.code==="Enter"||n.code==="Space")&&e()})});function L(e){return e?Math.floor(Math.log10(e))?e:"0"+e:"00"}setInterval(()=>{let e=document.querySelector(".clock > .time > .hr"),t=document.querySelector(".clock > .time > .min"),a=document.querySelector(".clock > .time > .sec"),n=new Date,o=L(n.getHours()),s=L(n.getMinutes()),r=L(n.getSeconds());e.textContent=o,t.textContent=s,a.textContent=r},1e3);
